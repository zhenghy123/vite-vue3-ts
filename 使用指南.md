## api接口新增规范

---
例：
- 用户管理
  - 账号管理
  - 权限管理
- 平台管理

可新建文件夹
- `userManage`
  - `acctManage`
    - index.ts
  - `permissionManage`
    - index.ts
- `plateManage`
  - index.ts
---

## 页面 composition api 引入

- `ref`、 `reactive`、`useRouter` 等 `api` 不用手动 `import`
- `AutoImport` 插件已帮忙处理

## husky

vscode 安装 Commit Message Editor 插件，统一提交规范
建议各功能点代码分多次提交，不要集中到一起提交，可集中推送

mac系统没有权限
```
chmod ug+x .husky/*
chmod ug+x .git/hooks/*
```


## pinia & setup

pinia支持传统`vuex`写法和函数式写法

- 传统写法
  ```javascript
  import {defineStore} from 'pinia'
  export const useHomeStore = defineStore({
    data:()=>({
      count:0
    }),

    actions:{
      increment(){
        this.count++
      }
    }
  })

  <!-- 使用 -->
  const store = useHomeStore();
  store.increment()
  store.$patch({ count: store.count + 1 })

  ```

- 函数式写法
  ```javascript
  import {defineStore} from 'pinia'
  export const useHomeStore = defineStore('home',()=>{
    const count = ref(0)
    const increment = () =>{
      count.value++
    }

    return {count, increment}
  })

  <!-- 使用 -->
  const { count, increment } = useHomeStore();

  ```



在使用过程中要注意以下内容：

- 不能直接解构
```
const { count, increment } = useHomeStore();
```
解构`count`会失去响应性,可直接通过`store`的方式取值
```
const store = userHomeStore()
<div>{{store.count}}</div>
```

- 使用计算属性
 ```
const count = computed(()=>store.count)
```

- 使用`pinia`提供的`storeToRefs`
```
const {count} = storeToRefs(store)
```